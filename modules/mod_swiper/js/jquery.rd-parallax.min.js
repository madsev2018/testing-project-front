!function(a){var b=function(b,c){this.options=c,this.settings={imageClass:"parallax_image",patternClass:"parallax_pattern",contentClass:"parallax_cnt",wrapClass:"parallax"},this.$wrap=a(b),this.$image=a.noop()};b.prototype={init:function(){var a=this;a.isInit=!0,a.createDOM(),a.blur(),a.createListeners()},createDOM:function(){var b=this;b.$wrap.addClass(b.settings.wrapClass).wrapInner(a("<div/>",{class:b.settings.contentClass})).prepend(a("<div/>",{class:b.options.pattern?b.settings.patternClass:b.settings.imageClass}).css({"background-image":"url("+b.options.url+")","background-color":b.options.color})),b.$image=b.options.pattern?b.$wrap.find("."+b.settings.patternClass):b.$wrap.find("."+b.settings.imageClass)},createListeners:function(){this.createResizeListener(),this.createScrollListener()},createScrollListener:function(){var b=this;b.isMobile()&&!b.options.mobile||(a(window).bind("touchstart",function(){b.isTouched=!0}),a(window).bind("touchend",function(){b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){b.isTouched=!1},1200)}),a(window).bind("scroll",function(){b.move()}),b.move())},createResizeListener:function(){var b=this;b.isMobile()&&!b.options.mobile||(b.isMobile()||a(window).bind("resize",function(){b.resize()}),a(window).bind("orientationchange",function(){setTimeout(function(){b.resize()},300)}),b.resize())},move:function(){var b=this;if(b.isVisible()&&(!b.isMobile()||b.options.mobile)){var c=a(window).scrollTop(),d=b.$wrap.offset().top,e=a(window).height(),f=b.$wrap.outerHeight(),g=b.$image.height(),h=b.options.speed;h<0&&(h=0),h>1&&(h=1);var i=(c-(d-e))/(d+f-(d-e))*h;if("normal"==b.options.direction)var j=i*(f-g);else var j=(1-i)*(f-g);b.isIE()&&b.ieVersion()<=10?b.$image.css("top",""+j+"px"):b.isMobile()&&b.options.mobile?(b.isTouched||b.isInit)&&(b.$image.stop().animate({pos:j},{step:function(b){a(this).css("transform","translate3d(0, "+b+"px, 0)")},duration:b.options.duration},b.options.easing),b.isInit=!1):b.$image.css("transform","translate3d(0, "+j+"px, 0)"),b.isFirefox()&&window.devicePixelRatio<1&&(b.$image.css("background-color","#010101"),setTimeout(function(){b.$image.css("background-color",b.options.color)},10))}},resize:function(){var b=this,c=Math.max(a(window).height(),500);c<b.$wrap.outerHeight()&&(c=b.$wrap.outerHeight()+a(window).height()*b.options.speed),b.$image.height(c),setTimeout(function(){b.move(),b.blur()},300)},blur:function(){var b=this;!b.options.blur||b.isIE()||b.options.pattern||a("<img/>",{src:b.options.url}).load(function(){var a=b.$image.height()/this.height,c=b.$image.width()/this.width,d=Math.floor(Math.max(a,c));d>2?b.$image.css({filter:"blur("+d+"px)","-webkit-filter":"blur("+d+"px)"}):b.$image.css({filter:"blur(0px)","-webkit-filter":"blur(0px)"})})},isVisible:function(){var b=this,c=a(window).scrollTop(),d=a(window).height(),e=b.$wrap.offset().top,f=b.$wrap.outerHeight();return e+f>=c&&e<=c+d},isIE:function(){return navigator.appVersion.indexOf("MSIE")!=-1},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},ieVersion:function(){return parseFloat(navigator.appVersion.split("MSIE")[1])},isFirefox:function(){return"undefined"!=typeof InstallTrigger}},a.fn.rdparallax=function(c){var d=this.each(function(){var d=a.extend({},a.fn.rdparallax.defaults,c);d.url?new b(this,d).init():console.error("RD Parallax: data-url is not defined")});return d},a.fn.rdparallax.defaults={speed:.4,direction:"normal",blur:!1,mobile:!1,url:!1,pattern:!1,duration:200,easing:"linear",color:"inherit"},window.RDParallax_autoinit=function(c){a(c).each(function(){var c=a.extend({},a.fn.rdparallax.defaults,{url:a(this).data("url"),speed:a(this).data("speed"),direction:a(this).data("direction"),blur:a(this).data("blur"),mobile:a(this).data("mobile"),pattern:a(this).data("pattern"),color:a(this).data("color")});c.url?new b(this,c).init():console.error("RD Parallax: data-url is not defined")})}}(jQuery);